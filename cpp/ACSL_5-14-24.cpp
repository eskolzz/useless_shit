#include <bits/stdc++.h>
using namespace std;

vector<vector<int>> util_vectvectint(string input, int flag) 
{
    // +-----------------------------------+------------------------------------------------+
    // |            Information            |                   Reasoning                    |
    // +-----------------------------------+------------------------------------------------+
    // | i do not like this function       | didn't work for half the time i was doing this |
    // +-----------------------------------+------------------------------------------------+

    stringstream            ss(input);
    string                  idkthingy;
    vector<vector<int>>     things;
    vector<int>             tempVec;
    
    int x;
    
    while (ss >> x)
    
    { 
        tempVec.push_back(x);
        if(tempVec.size() == 5)
        {          
            things.push_back(tempVec);
            tempVec.clear();
        } 
    }
    return things;
    
}





string util_vectvectint2string(vector<vector<int>> table)
{
    
    stringstream sigmasigma;
    
    for (auto& row : table) 
    {
        for (int i : row)
        {
            sigmasigma << i << " ";
        }
    }
    return(sigmasigma.str());
}





vector<int> util_vectint(string& input, int flag) 
{

    stringstream    ss(input);
    string          idkthingy;
    vector<int>     things;
    
    if(flag == 0)
    { 
        while ( getline(ss, idkthingy, ' ' )) 
        {  
            things.push_back(stoi(idkthingy));
        }    
    }     
    return things;
}





int util_miscInt(int sum) //pasted from unknown cheats...
{
    // +------------------------------------------------------+
    // |                      multi tool                      |
    // +------------------------------------------------------+

    int result  = 1;
    
    while (result < sum)
    {
        result  *= 2;
    }
    
    return result;
}






vector<vector<int>> util_dropTiles(vector<vector<int>>& table) 
{
    
    
    // +----------------------------------+
    // | this took me too long dawg :sob: |
    // +----------------------------------+


    int numRows =    table.size();
    int numCols = table[0].size();
    
    for ( int col = 0; col < numCols; col++ )
    {
        int lastRow = numRows - 1;
        
        for( int row = numRows - 1; row >= 0; row-- )
        {
            if ( table[row][col] != 0 )
            {
                if  (row != lastRow )
                {
                    table[lastRow][col] = table[row][col];
                    table[row][col] = 0;
                }
                lastRow--;
            }
        }
    }
    return table;
}





void util_fillTiles(vector<vector<int>>& table)
{
     
    // +-------+
    // | 2ezzz |
    // +-------+
    
    int numRows = table.size();
    int numCols = table[0].size();
    int power   = 8;
    
    for (int row = 0; row < numRows; row++)
    {
        for (int col = 0; col < numCols; col++)
        {
            if(table[row][col] == 0)
            {
                table[row][col] = pow(2, power); 
                power --;
                
                if (power < 1) {power = 8;}
            }
        }
    }
}






string play2248(string boardValues, string pathValues) 
{
    
    //-------------------------------[dec]-------------------------------\\
    
    int lastTile         = 0;
    int smallestPower    = 0;
    int sumOfTiles       = 0;
    int xCoord           = 0;
    int yCoord           = 0;
    
    string returnString = "";
    
    int finalArr[8][5];
    
    vector<int> removedValues       = {};
    vector<int> pValVec             = util_vectint(pathValues, 0);
    vector<vector<int>> pBoardVec   = util_vectvectint(boardValues, 0);
    vector<vector<int>> cleansedVec = util_vectvectint(boardValues, 0);
    
    
    
    //-------------------------------[functions]-------------------------------\\
    
    //<h1> summerupper
    for (int i = 0; i < pValVec.size(); i++)
    {   
        xCoord                      = (pValVec.at(i)) / 10;
        yCoord                      = (pValVec.at(i)) % 10;
        sumOfTiles                  = sumOfTiles += pBoardVec[xCoord - 1][yCoord - 1];
    }
    
    //<h1\>
    
    //-------------------------------[cleanser]-------------------------------\\
    
    
    cleansedVec[(pValVec.back() / 10) - 1][(pValVec.back() % 10) - 1] = util_miscInt(sumOfTiles); //step uno;
    
    
    for (int i = 0; i < pValVec.size(); i++)
    {   

        // +----------------------------------------------+
        // | this cleanses all the tiles that aren't used | also keeps track of the ones that are.
        // +----------------------------------------------+

        int cTile                   = pBoardVec[xCoord - 1][yCoord - 1];
        xCoord                      = (pValVec.at(i)) / 10;
        yCoord                      = (pValVec.at(i)) % 10;
        
        if (xCoord == (pValVec.back() / 10) && yCoord == (pValVec.back() % 10)){} //idk what i was doin here | note i was high
        
        else 
        {  
            cleansedVec[xCoord - 1][yCoord - 1] = 0;
            removedValues.push_back(((xCoord) * 10) + yCoord);  
        }
                                          
    }

    util_dropTiles(cleansedVec);
    util_fillTiles(cleansedVec);
    
    return util_vectvectint2string(cleansedVec);
    
}





int main()
{
    ofstream fout(getenv("OUTPUT_PATH"));

    string boardValues;
    getline(cin, boardValues);

    string pathValues;
    getline(cin, pathValues);

    string result = play2248(boardValues, pathValues);

    fout << result << "\n";

    fout.close();

    return 0;
    

}
                                                                                       
                                                                /*.+-..:#@@@@@@@@#=-.:==.                                                                  
                                                            .+..-%@%%@%%%%@%@%@%@%@@@@@@@@@.-=.                                                            
                                                        .+..-%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%..=                                                         
                                                     .-...%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%..+.                                                     
                                                   =...+%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%:..:                                                   
                                                 -...:#########################################%#%#%#%...=                                                 
                                               -..:.###################################################*...=                                               
                                             =.....######################################################:....                                             
                                            ...:.:*#*#*#*+:*#####%%%:+###################################=.:..+                                            
                                          :..:...=***+.+++++++++****####.*********************************.....:.                                          
                                         -.......++.:--...:+@@@@@@@@*=.:++.:+**********+-.....:-**********-.:...:.                                         
                                        :..:.:.:........+@@@@@@@@@@@@@@%:....-++++=.-+++++++++++++++.++++++...:..:.                                        
                                        .........:.:.:=%%%%@@@@@@@@@@@@@@#..:..:..:......::::.......::..++=.:.....=                                        
                                       +.:.....:.....+%%%%%%%%@@@@@@@@@@@@@-.......:+#%%%@@@@@@@@+-.......:...:.:...                                       
                                       ....:.:......+%%%%%%%%%%@@@@@@@@@@@@@-.:.:=###%%%%%%@@@@@@@@@+..:....:.....:=                                       
                                      -..:.....:.:.+#%%%#%%%%%%%@@@@@@@@:-+@=..=######%%%%%%@@@@@@@%%%+...:.....:....                                      
                                      =......:.....*#####%%%%%%%%@@@@@-..%@@#===.@@@###%%%%%%@@@@%%%%%%+....:.:......                                      
                                      =.:.:........#######%%%%%%%%@@@:-......=--..%%.###%%%%%%@@@%%%%%%#..:.....:.:.-                                      
                                      :.....:.:.:..*#######%%%%%%%%@@.=......+.:.....*###%%%%%%@@@%%%%%#:.....:.....=                                      
                                     .....:.......:=########%%%%%%%%@%-.....-.=-....=#####%%%%%%@@%%%%%=..:.:.....:.=                                      
                                     -.:........:..-***######%%%%%%%%@%::--::..=::-:*######%%%%%%%%%%%=:......:.:.....                                     
                                     =...:.:.:......=*****######%%%%%%@%%%%+**+=+######%####%%%%%%%@@+...:..:........-                                     
                                    ...:.......:.:.:.=*******#######%##%%%%%%%@@@@@@@###%%%%%%%%%%+=...:........:.:..-                                     
                                    -........:.........=+*******#######%%%%%%%%%@@@@@@@@%###+==+.....:...:.:.:........-                                    
                                   =.:.:.:.:.......:...:.=++*****#%#########%%%%%@@@@@@@@#%%%%%%=:.:...:.......:..:.:...                                   
                                  =:.........:.:.:...::%@%%%%==+=+#%%##########%%%%@@@@@#%%%%%@@@@@+.........:..........:                                  
                                 =.........:.......:=@@@@@@%%%%%%+=+%%%%##########%%@@#%%%%%%@@@@@@@@@:.:.:....:.:..:.:..=                                 
                               ==:.:.:.:.:.......:=@@@@@@@@@@%%%%%%%=+%%%%###########*%%%%%@@@@@@@@@@@@@:...:............==.                               
                             :=+=..........:.:.::@@@@@@@@@@@@@@@%%%%%#=*%%%%#######+=%%%%@@@@@@@@@@@@@@@@%....:..:.:..:.:.+==.                             
                           -=++=.........:.....+@@@@@@@@@@@@@@@@@@%%%%%+=*%%%%###+=#%%%@@@@@@@@@@@@@@@@@@@@-:..............+==+.                           
                         =+*+=..:.:.:.:.......%@@@@@@@@@@@@@@@@@@@@@@%%%%#=+###==#%%%@@@@@@@@@@@@@@@@@@@@@@@+.:.:..:.:......=====-                         
                      :+##+=:.:.........:.:.:@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@%.........:.:....=====+.                      
                   .=+##==............:....:%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.:.:..:.....:....-======                    
                 -=%##=+......:.:.:.:......%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+.........:...:....:=+====.                 
               ==%%#==...:.:..........:.:.#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=.:.:.:....:...:.....=+-===.               
             ==%%%=:...:.....:......:....=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-......:....:...:.:...==-===.             
           .+%%++..:.:..-+=:.=.:.:......:%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#....:...:....-+=:..:...-=--==            
          =*%=+.....==-.     ......:.:.:+%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%=.:...:...:.     .==:.:..:=--=.          
          =+=...-=-.         ..:.......:%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#...:...:.=          .=+...:+==          
          =..==.              :..:.....=%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%.....:...+              .+...=          
                              +....:.:.=%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%-.:.......                              
                              ..:......+%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%=...:.:.-                               
                               =..:..:.+%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%=.......:                               
                               ........+%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%=.:...:=                                
                                :::.:..+%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%=...:=-.                                
                                 -===..+%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%+.-==:.                                 
                                  ==+=++%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%===+-.                                  
                                   -=+=#%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%+=+-.                                   
                                    .=+%%%%%%@@@%%%%%%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%@%%%%%%=+                                     
                                      =+%%%%##%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%##%%*+-                                      
                                       .=#%############%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@%%%%%%%%%%%%##############=+.                                       
                                      +########################%%%%%%%%%%%@@@@@@@%%%%%%%%%#*########################:                                      
                                  #####%%%%%%%%%%%@%@@@@###########=%%%%%%%%%%%%%%%%%%=+#############%%%%%%%%%%%@%@@@@%#-                                  
                               *####%%%%%%%%%%%%%%%%%%%@%@@##########*=#%%%%%%%%%%#==#############%%%%%%%%%%%%%%%%%%%%@%@##.                               
                             #####%%%%%%%%%%%%%%%%%%%%%%%%%%%##########*==+%#%#+==+##############%%%%%%%%%%%%%%%%%%%%%%%%%%##.                             
                            ######%%%%%%%%%%%%%%%%%%%%%%%%%%%############===+=+=+=##############%%%%%%%%%%%%%%%%%%%%%%%%%%%%##*                            
                           #######%%%%%%%%%%%%%%%%%%%%%%%%%%%############*+======###############%%%%%%%%%%%%%%%%%%%%%%%%%%%%###-                           
                           ########%%%%%%%%%%%%%%%%%%%%%%%%%%#############=+=+=++################%%%%%%%%%%%%%%%%%%%%%%%%%%#####                           
                           ############%#%%%%%%%%%%%%%%%%%%###############==+=+==#####################%#%%%%%%%%%%%%%%%%%%######                           
                           .#################%#%%%%%%%%%%################======+==#########################%#%%%%%%%%%%########.                           
                             .#########################################.           :#########################################.*/                             
