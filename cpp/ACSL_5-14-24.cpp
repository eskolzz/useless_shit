#include <bits/stdc++.h>

using namespace std;


/*
 * Complete the 'play2248' function below.
 *
 * The function is expected to return a STRING.
 * The function accepts following parameters:
 *  1. STRING boardValues
 *  2. STRING pathValues
 */

// im gonna leave the site when i want to wtf are you gonna do about it


vector<vector<int>> util_vectvectint(string input, int flag) 
{
    

    // +-----------------------------------+------------------------------------------------+
    // |            Information            |                   Reasoning                    |
    // +-----------------------------------+------------------------------------------------+
    // | Fuck this function respectfully.  | didn't work for half the time i was doing this |
    // +-----------------------------------+------------------------------------------------+

    stringstream            ss(input);
    string                  idkthingy;
    vector<vector<int>>     things;
    vector<int>             tempVec;
    
    int x;
    while (ss >> x)
    {
        tempVec.push_back(x);
        if(tempVec.size() == 5)
        {
            things.push_back(tempVec);
            tempVec.clear();
        }
    }
    
    
    return things;
    
}


vector<int> util_vectint(string& input, int flag) 
{
    
    

    // +---------------------------------+
    // | what do mexican programmers use |
    // +---------------------------------+
    // | si ++                           |
    // +---------------------------------+



    stringstream    ss(input);
    string          idkthingy;
    vector<int>     things;
    
    if(flag == 0)
    {
        while ( getline(ss, idkthingy, ' ' )) 
        {
            things.push_back(stoi(idkthingy));
        } 
    }      
    return things;
}

int util_useless(int sum) //pasted from unknown cheats...
{
    
    
    
    // +------------------------------------------------------+
    // | find smallest powah of 2 that is >= the given number |
    // +------------------------------------------------------+
    
    int result  = 1;
    
    while (result < sum)
    {
        result *= 2;
    }
    
    return result;
    
}

/*
int util_idkwhat2namethis(string input, vector<int> vect) //useless fucking function idk why i made this (there was more than this before)
{
    int xCoord   = stoi(input) / 10;
    int yCoord   = stoi(input) % 10;
    
    int tempSum  = 0;
    int temp1    = 0;
    int temp2    = 0;
    
    int tempArr[8][5];
    
    cout << temp2 << endl;
    
    cout << "temp1 == " << temp1;
    cout << "\n" << endl;
    cout << "temp2 == " << temp2;
    cout << "\n" << endl;
    cout << "x == " << xCoord;
    cout << "\n" << endl;
    cout << "y == " << yCoord;
    cout << "\n" << endl;
    
    return
    (
        tempArr[xCoord][yCoord]
    );
    
}
*/


string play2248(string boardValues, string pathValues) 
{
    
    //-------------------------------[dec]-------------------------------\\
    
    int lastTile       = 0;
    int smallestPower  = 0;
    int sumOfTiles     = 0;
    int xCoord         = 0;
    int yCoord         = 0;
    
    int finalArr[8][5];
    
    vector<int> pValVec             = util_vectint(pathValues, 0);
    vector<vector<int>> pBoardVec   = util_vectvectint(boardValues, 0);
    vector<vector<int>> cleansedVec = util_vectvectint(boardValues, 0);
    
    
    
    //-------------------------------[main]-------------------------------\\
    
    
    
    for( int i = 0; i < 8; i++) 
    {
        cout << "\n";
        
        for( int j = 0; j < 5; j++)
        { 
            cout << pBoardVec[i][j] << " ";

        }
    }
    
    cout << "\n\n";
    
    for( int i = 0; i < 8; i++) 
    {
        cout << pValVec[i] << " ";
    }
    
    cout << "\n\n";
    
    
    
    //<div> sum calc
    
    for (int i = 0; i < pValVec.size(); i++)
    {   
        
        xCoord                                       = (pValVec.at(i)) / 10;
        yCoord                                       = (pValVec.at(i)) % 10;
        sumOfTiles                                   = sumOfTiles += pBoardVec[xCoord - 1][yCoord - 1];
        

        
        cout << "--------------------"              << endl;
        cout << "xCoord == "                        << xCoord << endl;
        cout << "yCoord == "                        << yCoord << endl;
        cout << "Current i value == "               << i << endl;
        cout << "current tile == "                  << pBoardVec[xCoord - 1][yCoord - 1]   << endl; //this line took me fucking 1 hour by the way
        cout << "Current Sum == "                   << sumOfTiles << endl;
        cout << "Current smallestPower == "         << smallestPower << endl;
        cout << "--------------------"      << endl << endl;
        
    }
    
    //<div\>
    
    //-------------------------------[cleanser]-------------------------------\\

    
    cleansedVec[pValVec.back() / 10][pValVec.back() % 10] = util_useless(sumOfTiles);
    
    
    //-------------------------------[debuggah]------------------------------\\
    
        cout << "----------[ header ]----------"              << endl;
        
        cout << "----------[ enderr ]----------"      << endl << endl;

    return("sum of tiles == " + to_string(sumOfTiles) + "  |   smallestPower == " + to_string(smallestPower));
}

//yo add dracula theme please...

int main()
{
    ofstream fout(getenv("OUTPUT_PATH"));

    string boardValues;
    getline(cin, boardValues);

    string pathValues;
    getline(cin, pathValues);

    string result = play2248(boardValues, pathValues);

    fout << result << "\n";

    fout.close();

    return 0;
    
                                      /*.::---:=-=:-::                                        
                             -::...............:.............                                
                          ::......................-::-:........::                            
                      -............ ..-:-=+-+**##%*#*=-::.:.:.....:                          
                  -:..........:....:.-*+##*#%%@@@@%%%%+**+-*++.::....                        
                 ......   ....:::.-+-=%=####%@@@@@@@@@@@%#%@@@%*-:....                       
               -:.. .....:.++:--:-+++**+##%%@@%@@@@@@@@@@@@@@@@@@##=:.                       
              :.... ...::.--+--*====++++%%@%@@@@%@@@@@@@@@@@%@@@@@@#++-: ==                  
            :.........:=-=*-*###@#%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@##**=-::.                
           ..... ...:--++#+%#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*%==:-:..              
         :... .....::++*=+#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+*::.....            
        :.. .    :==+%+%#%@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@*---..:...          
       ...... ...-=*+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*--:-......:         
      :....... ..:=%%@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+:=*-:...::.-       
     -....   ....-#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=*+#--...:-::      
    -...........-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*%@+...:-::.:     
    :........:.-*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+%%++:.:.:::.:    
   *..........-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#+#-....:..-    
   :.........:+@@@@@@@@@@@@@%##*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@%@#==+:.::....:   
   :.........-*@@@@@@#*+-:-.:-=-==+*+%%@@@@@@@@@@@@@@@@@@%#%*=:-.---::++#*#@@+#%*.:.::....   
  :=.........-*@@#=::-.........:-::...:=#%#@@@%%@@@@@@*::.::.:-.......:-:.::+#*%#:-:::....   
  ::.:.......-%%=.:::::..........:.......::=**#%#*%#+-:......................=@%*-=:..:..    
    ...:.....+%:.....::::....+*#+::.......:.*+#%=%=+:.....:...:-:...--.:-:...=@@+-=-=:...=   
    .........=*:.::-+%##@@%%@@@@@@@#==....:-+#%#+==:......:-@@@@%@%@@%@@#**-=-#%*:-.......   
   +..:.....:+#*#++*#%#=:..........:+#%%++=+#@@@@#=---+*%*=::...:-++#%%@@@@@@#%%+:::.....-   
   :.........-#%@@*:.......  ...#@-.:==%@@@@@@@@@@@@@@@%=:=%-. .-+..::..=#@@@@@@+:.....:.-=  
   ...........+@@%:..:==*-.....+@@#:.=:*%@@@@@@@@@@@@@@%#*#@% .....+@#*-=*%@@@@@#:-.....:+   
   .... .....:#@@@%@%@%%@%#*##%@@@@@@%%+%@@@@@@@@@@@@@@@@@@@@@#+=*@@@%@@@@@@@@@%#=......:    
   :..    ...+@@@@@@@@@@@@@@%@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@%=...::::.    
   -..    ...*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=.....:      
   :....  ..:+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*.:.:=+      
   ::...  ..:*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-...-#=      
  :: ...  ..:*%@@@@@@@@@@@@@@@@@@@@@@@%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#:...*@%*     
  ::  :.....:+#@@@@@@@@@@@@@@@@@@@@@@%+@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+..:#@@=     
  ==   -:...:#@%@@@@@@@@@@@@@@@@@@@@@==#@*#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..%@@@%     
  ::  #-....:*%%@@@@@@@@@@@@@@@@@@@@@+=+*:.*@@@@@@@#*@@@@@@@@@@@@@@@@@@@@@@@@@@@*.+@@@@@     
  .: *+-:...-=*%@@@@@@@@@@@@@@@@@@@@@#:-=:..+@@@%*..*%@%@@@@@@@@@@@@@@@@@@@@@@@%-.%*%@@%     
   +- +*+:..-+*%%@@@@@@@@@@@@@@@@@@@@@@%*+=:-=*+++#%%@@@@@@@@@@@@@@@@@@@@@@@@@@=.=@@@@@      
    -=*%%%=-=-*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*#@@@@%%      
      *#**::..+*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-:=%@@@@       
      ::::..-:+*%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@==-%=#%        
       :::.....=*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-::=%#         
         ......:=*#%@@@@@@@@##*#%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@%###@@@@@@@@@@@@=:.:           
              .:-=*%%@@@@@@%++=.......:..:.--=+++=+=====+==-*+%@@@@@@@@@@@@@@@@              
               ..:=#%%@@@@@@@@@%*-.:..:..:-=**==-=*+#+=++%%@@@@@@@@@@@@@@@@@@@               
                .:-+#=%%@@@@@@@@@@@#-++-:-+:+*##+-#%@%@@@@@@@@@@@@@@@@@@@@@@@                
                 :.:=+*%%@@@@@@@@@@@@@%*=:+-*=+**%*###@@@@@@@@@@@@@@@@@@@@@@                 
                   ..-++#%%@@@@@@@@@@@@@@@@@%@%%%@%@@@@@@@@@@@@@@@@@@@@@@@%%                 
                    :..--+#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@                    
                      ...-:%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#                      
                       .:..-+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*+                        
                         =..:+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@--+                         
                           :..:=#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+-+                           
                             :...::+#%%@%%%%@%@@@@@@@@@@@@@%%*=%                             
                               ..:....=:---..:..::==*+#+==+*=+*                              
                                    ::.................-+*/                                   
//                                                                                                                                         
//                         /                ###                                                       /                                    
//                       #/                  ###                                                    #/                                     
//                       ##                   ##                                                    ##                                     
//                       ##                   ##       ##                                           ##                                     
//                       ##                   ##       ##                                           ##                                     
//     /##       /###    ##  /##      /###    ##        ##    ###    ####      /###      /###       ##  /##      /##  ###  /###     /##    
//    / ###     / #### / ## / ###    / ###  / ##         ##    ###     ###  / / ###  /  / #### /    ## / ###    / ###  ###/ #### / / ###   
//   /   ###   ##  ###/  ##/   /    /   ###/  ##         ##     ###     ###/ /   ###/  ##  ###/     ##/   ###  /   ###  ##   ###/ /   ###  
//  ##    ### ####       ##   /    ##    ##   ##         ##      ##      ## ##    ##  ####          ##     ## ##    ### ##       ##    ### 
//  ########    ###      ##  /     ##    ##   ##         ##      ##      ## ##    ##    ###         ##     ## ########  ##       ########  
//  #######       ###    ## ##     ##    ##   ##         ##      ##      ## ##    ##      ###       ##     ## #######   ##       #######   
//  ##              ###  ######    ##    ##   ##         ##      ##      ## ##    ##        ###     ##     ## ##        ##       ##        
//  ####    /  /###  ##  ##  ###   ##    ##   ##         ##      /#      /  ##    /#   /###  ##     ##     ## ####    / ##       ####    / 
//   ######/  / #### /   ##   ### / ######    ### /       ######/ ######/    ####/ ## / #### /      ##     ##  ######/  ###       ######/  
//    #####      ###/     ##   ##/   ####      ##/         #####   #####      ###   ##   ###/        ##    ##   #####    ###       #####   
//                                                                                                         /                               
//                                                                                                        /                                
//                                                                                                       /                                 
//                                                                                                      /                                  

}
